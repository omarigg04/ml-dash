<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-warning text-dark">
                    <h3 class="mb-0">üì¶ Publicar Producto en MercadoLi

                        bre</h3>
                </div>
                <div class="card-body">

                    <!-- Success Message -->
                    <div *ngIf="successMessage" class="alert alert-success" role="alert">
                        <strong>‚úÖ {{ successMessage }}</strong>
                    </div>

                    <!-- Error Message -->
                    <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
                        <strong>‚ùå {{ errorMessage }}</strong>
                    </div>

                    <form (ngSubmit)="onSubmit()" #productForm="ngForm">

                        <!-- Title -->
                        <div class="mb-3">
                            <label for="title" class="form-label">T√≠tulo del Producto *</label>
                            <input type="text" class="form-control" id="title" name="title" [(ngModel)]="product.title"
                                required maxlength="60" placeholder="Ej: Laptop HP Core i5 8GB RAM">
                            <small class="form-text text-muted">M√°ximo 60 caracteres</small>
                        </div>

                        <!-- Category -->
                        <div class="mb-3">
                            <label for="category" class="form-label">Categor√≠a *</label>
                            <select class="form-select" id="category" name="category_id"
                                [(ngModel)]="product.category_id" required>
                                <option *ngFor="let cat of categories" [value]="cat.id">
                                    {{ cat.name }}
                                </option>
                            </select>
                        </div>

                        <!-- Price -->
                        <div class="mb-3">
                            <label for="price" class="form-label">Precio (MXN) *</label>
                            <input type="number" class="form-control" id="price" name="price"
                                [(ngModel)]="product.price" required min="0" step="0.01" placeholder="199.00">
                        </div>

                        <!-- Stock -->
                        <div class="mb-3">
                            <label for="stock" class="form-label">Cantidad Disponible *</label>
                            <input type="number" class="form-control" id="stock" name="available_quantity"
                                [(ngModel)]="product.available_quantity" required min="1" placeholder="10">
                        </div>

                        <!-- Condition -->
                        <div class="mb-3">
                            <label class="form-label">Condici√≥n *</label>
                            <div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="condition" id="conditionNew"
                                        value="new" [(ngModel)]="product.condition">
                                    <label class="form-check-label" for="conditionNew">
                                        Nuevo
                                    </label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="condition" id="conditionUsed"
                                        value="used" [(ngModel)]="product.condition">
                                    <label class="form-check-label" for="conditionUsed">
                                        Usado
                                    </label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="condition" id="conditionRefurbished"
                                        value="refurbished" [(ngModel)]="product.condition">
                                    <label class="form-check-label" for="conditionRefurbished">
                                        Reacondicionado
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Listing Type -->
                        <div class="mb-3">
                            <label for="listingType" class="form-label">Tipo de Publicaci√≥n</label>
                            <select class="form-select" id="listingType" name="listing_type_id"
                                [(ngModel)]="product.listing_type_id">
                                <option *ngFor="let type of listingTypes" [value]="type.id">
                                    {{ type.name }} - {{ type.description }}
                                </option>
                            </select>
                            <small class="form-text text-muted">Las publicaciones Premium pueden tener costo adicional</small>
                        </div>

                        <!-- Warranty Type -->
                        <div class="mb-3">
                            <label for="warrantyType" class="form-label">Tipo de Garant√≠a (opcional)</label>
                            <select class="form-select" id="warrantyType" name="warranty_type"
                                [(ngModel)]="product.warranty_type">
                                <option value="">Sin especificar</option>
                                <option *ngFor="let type of warrantyTypes" [value]="type">
                                    {{ type }}
                                </option>
                            </select>
                        </div>

                        <!-- Warranty Time -->
                        <div class="mb-3" *ngIf="product.warranty_type && product.warranty_type !== 'Sin garant√≠a'">
                            <label for="warrantyTime" class="form-label">Tiempo de Garant√≠a</label>
                            <select class="form-select" id="warrantyTime" name="warranty_time"
                                [(ngModel)]="product.warranty_time">
                                <option value="">Seleccionar...</option>
                                <option *ngFor="let time of warrantyTimes" [value]="time">
                                    {{ time }}
                                </option>
                            </select>
                        </div>

                        <!-- Pictures URLs -->
                        <div class="mb-3">
                            <label for="pictures" class="form-label">URLs de Im√°genes (opcional)</label>
                            <textarea class="form-control" id="pictures" name="pictures" [(ngModel)]="product.pictures"
                                rows="3"
                                placeholder="https://ejemplo.com/imagen1.jpg&#10;https://ejemplo.com/imagen2.jpg&#10;Una URL por l√≠nea"></textarea>
                            <small class="form-text text-muted">Una URL por l√≠nea. M√°ximo 6 im√°genes.</small>
                        </div>

                        <!-- Description -->
                        <div class="mb-3">
                            <label for="description" class="form-label">Descripci√≥n (opcional)</label>
                            <textarea class="form-control" id="description" name="description"
                                [(ngModel)]="product.description" rows="4"
                                placeholder="Describe las caracter√≠sticas y beneficios de tu producto..."></textarea>
                        </div>

                        <!-- Buttons -->
                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <button type="button" class="btn btn-secondary" (click)="resetForm()" [disabled]="loading">
                                Limpiar
                            </button>
                            <button type="submit" class="btn btn-warning" [disabled]="!productForm.valid || loading"
                                style="background-color: #FFE600; border-color: #FFE600; color: #333; font-weight: bold;">
                                <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
                                {{ loading ? 'Publicando...' : 'Publicar Producto' }}
                            </button>
                        </div>

                    </form>

                </div>
            </div>
        </div>
    </div>
</div>